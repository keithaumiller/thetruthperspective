<?php

use Drupal\Core\Routing\RouteMatchInterface;

/**
 * @file
 * News Motivation Metrics module.
 */

/**
 * Implements hook_help().
 */
function newsmotivationmetrics_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.newsmotivationmetrics':
      return '<p>' . t('Provides analytics and metrics dashboard for news article motivations and AI analysis.') . '</p>';
  }
}

/**
 * Implements hook_preprocess_page().
 */
function newsmotivationmetrics_preprocess_page(&$variables) {
  $route_name = \Drupal::routeMatch()->getRouteName();
  
  // Apply hero layout to metrics page.
  if ($route_name === 'newsmotivationmetrics.public_dashboard') {
    // Add hero layout classes to make content full-width.
    $variables['attributes']['class'][] = 'layout--hero';
    $variables['attributes']['class'][] = 'layout--full-width';
    
    // Remove sidebar regions for full-width display.
    unset($variables['page']['sidebar_first']);
    unset($variables['page']['sidebar_second']);
    
    // Add custom page class for specific styling.
    $variables['attributes']['class'][] = 'page--metrics-dashboard';
  }
}

/**
 * Implements hook_preprocess_region().
 */
function newsmotivationmetrics_preprocess_region(&$variables) {
  $route_name = \Drupal::routeMatch()->getRouteName();
  
  // Apply full-width styling to content region on metrics page.
  if ($route_name === 'newsmotivationmetrics.public_dashboard' && $variables['region'] === 'content') {
    $variables['attributes']['class'][] = 'region--hero';
    $variables['attributes']['class'][] = 'region--full-width';
  }
}
